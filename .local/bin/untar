#!/bin/zsh
#
# This script automates the process of "untaring" (unzipping) a tar file. This script takes one command line argument that is the link to the tar file that will be downloaded.
# Through `wget`, the tar file will be downloaded. The tar file will be placed in the `/tmp` directory. After this, through the `tar` utility will the tar file be unzipped. 
# The unzipped version will be outputted to the `~/untar` directory. If a folder in this directory has the same name as the substring before the first `-` in the tar file's name, 
# the unzipped tar file will replace it. Otherwise, a new directory will be created and the binary will be exported to `PATH`.

TAR_LINK=$1
TAR_FILE=$($TAR_LINK | awk -F'.' ' { print $NF }')
TAR_FILE_EXT=$($TAR_FILE | awk -F'.' ' { print $NF }')
# REPO_NAME=

# Download the tar file into `/tmp`
wget $TAR_LINK -P /tmp

# Unzip the tar file and output the unzipped result to `~/untar`
cd /tmp

if [ $TAR_FILE_EXT == "zst" ]; then
  tar --use-compress-program=unzstd -xf $TAR_FILE -C $UNTAR_DIR/$REPO_NAME
else
  tar -xf $TAR_FILE -C $UNTAR_DIR/$REPO_NAME
fi

# TODO: check if folder with name `$TAR_FILE` already exists and override its contents with the contents of the unzipped tar file which should be done above 
# SCRIPT INCOMPLETE